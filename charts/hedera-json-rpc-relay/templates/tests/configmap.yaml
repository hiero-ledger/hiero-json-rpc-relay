{{- if .Values.test.enabled -}}
apiVersion: v1
kind: ConfigMap
metadata:
  annotations:
    helm.sh/hook: test-success
    helm.sh/hook-delete-policy: before-hook-creation,hook-succeeded
  labels: {{- include "json-rpc-relay.labels" . | nindent 4 }}
  name: {{ include "json-rpc-relay.fullname" . }}-test
  namespace: {{ include "json-rpc-relay.namespace" . }}
data:
  hoppscotch.json: |-
    {{- .Values.test.hoppscotch | b64dec | default (.Files.Get "hoppscotch.json") | nindent 4 }}
  hopp-env.json: |-
    {{- .Values.test.hoppEnv | b64dec | default (.Files.Get "hopp-env.json") | nindent 4 }}
{{- end -}}
